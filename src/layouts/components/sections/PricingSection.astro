---
import type { z } from "astro/zod";
import { markdownify } from "@/lib/utils/textConverter";
import type { pricingSectionSchema } from "@/sections.schema";
import PricingCard from "@/layouts/components/cards/PricingCard.astro";

// Type for this section data
type PricingSection = NonNullable<z.infer<typeof pricingSectionSchema>>;

type Props = {
  content?: PricingSection;
};

// Content comes directly from props (inline in content_blocks array)
// This enables CloudCannon visual editing
const content = Astro.props.content || {} as PricingSection;

// Extracting values from content with defaults
let { enable = true, title = "", list = [] } = content;

if (!enable) {
  return null;
}
---

<section id="pricing">
  <div class="container space-y-14">
    {
      title && (
        <div class="text-center">
          <h2 data-editable="text" data-prop="title" class="text-h1-sm md:text-h1" set:html={markdownify(title)} />
        </div>
      )
    }

    <div data-prop="list" data-editable="array" class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
      {list?.map((item) => <PricingCard content={item} />)}
    </div>
  </div>
</section>
